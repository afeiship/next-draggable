/*!
 * name: next-draggable
 * url: https://github.com/afeiship/next-draggable
 * version: 1.0.0
 * license: MIT
 */
!function(){var t=t||this||window||Function("return this")(),e=t.nx||require("next-js-core2"),n=e.dom?e.dom.Event:require("next-dom-event"),s=e.TouchEvents||require("next-touch-events"),o=e.declare("nx.Draggable",{methods:{init:function(t,n){this.element=t,this.options=e.mix({onChange:e.noop},n),this._offset=null,this.attachEvents()},attachEvents:function(){var e=this.element,o=t.document;this._startRes=n.on(e,s.TOUCH_START,this._onStart.bind(this)),this._moveRes=n.on(o,s.TOUCH_MOVE,this._onMove.bind(this)),this._endRes=n.on(o,s.TOUCH_END,this._onEnd.bind(this))},detachEvents:function(){this._startRes.destroy(),this._moveRes.destroy(),this._endRes.destroy()},event:function(t){var e=t.touches;if(e&&e.length>0){var n=e[0];return n.offsetX=n.clientX-n.target.offsetLeft,n.offsetY=n.clientY-n.target.offsetTop,n}return t},change:function(t,e){var n=this.event(e);this.options.onChange({type:t,target:{value:{x:n.clientX-this._offset.x,y:n.clientY-this._offset.y}}})},_onStart:function(t){var e=this.event(t);this._offset={x:e.offsetX,y:e.offsetY},this.change("dragstart",t)},_onMove:function(t){this._offset&&this.change("drag",t)},_onEnd:function(t){this._offset&&(this.change("dragend",t),this._offset=null)}}});"undefined"!=typeof module&&module.exports&&(module.exports=o)}();